# 7kai Tasks Checker v2.5 release

7kai Tasks で使用している仮の Chrome Extensions の実装を本格的に修正、なんとか実用レベルになっただろうか。

- デスクトップ通知
- ポップアップで直近の履歴を表示、更にクリックした際、サービスページで関連リストを表示しタスクをハイライト

拡張機能からページにイベントを送れるので、ハッシュはクエリーを使わず任意のイベントを発火できる、素晴らしい。

## 機能

- やらないといけないタスクの残数を表示する(以下条件)
    1. 期限が明日以降のタスクはカウントしない
    2. 7kai Tasksのリスト設定でバッジ非表示にしているタスクはカウントしない
    3. 自分が担当し、ステータスが未着手又は着手 (処理または期日設定/リスケをしないといけない)
    4. 自分が依頼し、担当者不在 (担当者を割り当てるまで自分が担当とみなす)
    5. 自分が依頼し、処理済み (確認し、完了または差し戻す、**完了までがタスク管理です**)
- 自分に関係するイベントを通知する(以下条件)
    1. 自分のやった事は通知しない
    2. リストへのアサイン
    3. リストの編集
    4. タスクへのアサイン(作成時に任命された)
    5. 依頼又は担当しているタスクの更新(差し戻しや完了等)
    6. 依頼又は担当しているタスクへのコメント

自分が依頼も担当もしていないタスクについては通知しないポリシーである、そこまで通知する機能があると遠慮して他のメンバーが使いづらくなることも危惧される等が理由です。

何を通知し何をカウントすべきかはサービス側でかなり検討した結果の実装となっており、詳細な設定は設けない予定です、タスクが残留する原因の１つに**誰が何をしないといけないのか不明**というものがあり、完了されるまでは依頼者か担当者にカウントされる設計となっています、期限を設けず放置するのも残る原因ですが要望リストの様なリストでいちいち数カ月先に期限を儲け続けるのは大変なので仮置き的リストはリスト自体をカウント対象から外せるようにしています。

## 参考
- [7kai Tasks](http://tasks.7kai.org/)
- [7kai Tasks Checker](https://chrome.google.com/webstore/detail/dolhpjcchfcnkcanamhgcgbnmcogdank)
- [ソースコード](https://github.com/s-aska/7kai-Tasks/tree/master/extensions/7kai-tasks-checker/src)
- [Chrome Extensions API リファレンス](http://dev.screw-axis.com/doc/chrome_extensions/)
